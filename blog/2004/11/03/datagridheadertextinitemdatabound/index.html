<p>&mdash;-layout: posttitle: 如何在ItemDataBound内获得DataGrid的列名称HeaderTextcomments: truedate: 2004-11-03 19:30categories:&ndash; ASP.NET- Asp.net- DataGrid- GridView- Grid&mdash;&ndash;<p> </p><p>如果 AutoGenerateColumns=&ldquo;false&rdquo; 使用绑定列，模板列<br />则比较好办，直接使用 YourDataGrid.Columns[编号].HeaderText 获得<br />可是,如果 AutoGenerateColumns=&ldquo;true&rdquo; ,就比较麻烦了,因为这时YourDataGrid.Columns.Count是0<br />但是可以变通做到。</p><p>示例：</p><p><!--more--></p><code><span style="color: #000000">&lt;%@ Page Language=&ldquo;C#" Debug="true" %&gt;<br />&lt;%@ Import Namespace="System.Data" %&gt;<br />&lt;!DOCTYPE html PUBLIC &rdquo;&ndash;//W3C//DTD XHTML 1.0 Transitional//EN" "<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</a>"&gt;<br />&lt;html xmlns=&ldquo;<a href="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</a>" xml:lang="gb2312" lang="gb2312&rdquo;&gt;<br />&lt;head&gt;<br />&lt;title&gt; ItemDataBoundGetColumnName &lt;/title&gt;<br />&lt;meta http-equiv=&ldquo;Content-Type" content="text/html; charset=gb2312" /&gt;<br />&lt;meta name="title" content=&rdquo;&ldquo; /&gt;<br />&lt;meta name="author" content="活靶子,Huobazi,www.AspxBoy.com" /&gt;<br />&lt;meta name="subject" content=&rdquo;&ldquo; /&gt;<br />&lt;meta name="language" content="gb2312" /&gt;<br />&lt;meta name="keywords" content=&rdquo;&ldquo; /&gt;<br />&lt;meta name="Copyright" content="www.AspxBoy.com" /&gt;<br />&lt;meta name="robots" content="all" /&gt;<br /><br />&lt;script language="c#" runat="server&rdquo;&gt;<br />void BindGrid()<br />{<br />DataTable dt = new DataTable();<br />        DataRow dr;<br />        dt.Columns.Add(new DataColumn(&ldquo;IntegerValue&rdquo;, typeof(Int32)));<br />        dt.Columns.Add(new DataColumn(&ldquo;StringValue&rdquo;, typeof(string)));<br />        dt.Columns.Add(new DataColumn(&ldquo;DateTimeValue&rdquo;, typeof(DateTime)));<br />        dt.Columns.Add(new DataColumn(&ldquo;BoolValue&rdquo;, typeof(bool)));<br />        dt.Columns.Add(new DataColumn(&ldquo;CurrencyValue&rdquo;, typeof(double)));<br />        for (int i = 0; i &lt; 36; i++) {<br />            dr = dt.NewRow();<br />            dr[0] = i;<br />            dr[1] =&amp; amp;nbsp;&ldquo;项 " + i.ToString();<br />            dr[2] = DateTime.Now;<br />            dr[3] = (i % 2 != 0) ? true : false;<br />            dr[4] = 1.23 * (i+1);<br />            dt.Rows.Add(dr);<br />        }<br />  dg.DataSource= dt;<br />  dg.DataBind();<br />}<br />void Page_Load(object o, EventArgs e)<br />{<br /> dg.PagerStyle.Mode = PagerMode.NumericPages;<br /> if(!IsPostBack)<br /> {<br />BindGrid();<br /> }<br />}<br /> <br />void btnClick(object o , EventArgs e)<br />{<br /> Response.Write("页面回发,但是不执行ItemDataBound&rdquo;);<br />}<br /> <br />void PageChange(object o , DataGridPageChangedEventArgs e)<br />{<br /> dg.CurrentPageIndex = e.NewPageIndex;<br /> BindGrid();<br />}<br />void ItemDataBound(object o , DataGridItemEventArgs e)<br />{<br /> if(e.Item.ItemIndex &gt; -1 )//必须<br /> {<br />  DataRowView drv = (DataRowView)e.Item.DataItem;<br />  for (int i=0; i&lt;drv.Row.Table.Columns.Count ; i++)<br />  {  <br />Response.Write(drv.Row.Table.Columns[i].ColumnName + "  ");<br />  }<br /> }<br />}<br />&lt;/script&gt;<br /><br />&lt;/head&gt;<br />&lt;body&gt;<br />&lt;form runat=&ldquo;server&rdquo;&gt;<br />  &lt;ASP:DataGrid id=&ldquo;dg" runat="server"       <br />   HeaderStyle-BackColor=&rdquo;#aaaadd"<br />   AutoGenerateColumns=&ldquo;true&rdquo;<br />   AllowPaging=&ldquo;true&rdquo;<br />   PageSize=&ldquo;6&rdquo;<br />    OnItemDataBound=&ldquo;ItemDataBound&rdquo;<br />    OnPageIndexChanged=&ldquo;PageChange&rdquo;<br />  &gt;<br />  &lt;/asp:DataGrid&gt;<br />  &lt;/br&gt;<br />   &lt;asp:button id=&ldquo;btn&rdquo;&amp; amp;nbsp;runat=&ldquo;server" onclick="btnClick" Text="我是按钮, 按我一下&rdquo;&gt;&lt;/asp:button&gt;<br />在AutoGenerateColumns=&ldquo;false"使用绑定列或者模板列的时候只需要使用 <br /><br />&lt;font color="blut&rdquo;&amp; amp;gt;YourDataGrid.Columns[编号].HeaderText&lt;/font&gt; 去获取<br />  <br />&lt;/form&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</span></code><p> <br /><a href="http://www.aspxboy.com/Files/71/66/284.Aspx" target="_blank"><a href="http://www.aspxboy.com/Files/71/66/284.Aspx">http://www.aspxboy.com/Files/71/66/284.Aspx</a></a></p><p> </p></p>
