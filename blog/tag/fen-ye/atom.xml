<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 分页 | 武眉博]]></title>
  <link href="http://huobazi.github.com/blog/tag/fen-ye/atom.xml" rel="self"/>
  <link href="http://huobazi.github.com/"/>
  <updated>2013-07-14T10:40:10+08:00</updated>
  <id>http://huobazi.github.com/</id>
  <author>
    <name><![CDATA[Marble Wu]]></name>
    <email><![CDATA[huobazi@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[分页存储过程]]></title>
    <link href="http://huobazi.github.com/blog/2004/02/09/pagedsp/"/>
    <updated>2004-02-09T17:33:00+08:00</updated>
    <id>http://huobazi.github.com/blog/2004/02/09/pagedsp</id>
    <content type="html"><![CDATA[<p>搞了一中午终于可以用了 但不知道效率如何.郁闷的是我要用php去调用它</p>


<p><span style="color: #008000;">  /*+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />    CopyRight：   ******<br />    CreateData：   2004-02-09<br />    Language：   MS SQL SERVER 存储过程<br />    AuthorName：  Meibo Wu</span><br /><span style="color: #008000;">    实现功能：   分页显示当用户选择了图片大分类时(按手机)的数据<br />    参数说明：   @bigtype为大分类<br />    @gid为传入的图片类型           <br />        $PageSize为每页显示的记录数量<br />    @pageindex为当前页码                             <br />    LastUpdate:            <br />    ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/<br />CREATE procedure sms_img_page_no_smalltype<br />(<br /> @bigtype nvarchar(20),<br /> @gid int,<br /> @pagesize int,<br /> @pageindex int<br />)<br />as<br />set nocount on<br /> declare @LikeBigType nvarchar(20)<br /> declare @PageLowerBound int<br /> declare @PageUpperBound int<br /> declare @indextable table(id int identity(1,1),nid int)<br />  set @PageLowerBound=(@pageindex-1)*@pagesize<br />  set @PageUpperBound= @PageLowerBound+@pagesize<br />  set @LikeBigType= @bigtype+'%'<br />  set rowcount @PageUpperBound<br /> insert into @indextable(nid)<br />  select  a.col_id<br />   from web_sms_data_img as a join web_sms_data_mobile as q<br />   on a.col_mobile_type=q.col_mobile_type<br />   where </span><a href="mailto:a.col_img_group=@gid"><span style="color: #008000;">a.col_img_group=@gid</span></a><span style="color: #008000;"><br />    and q.col_mobile_comment  like @LikeBigType<br />   order by a.col_id desc <br /> /*<br /> select  @LikeBigType<br /> select * from @indextable <br /> */<br /> select q.col_mobile_comment,<br />  a.col_id,<br />  a.col_img_hits,<br />  a.col_img_dir,<br />  a.col_img_name<br />  from web_sms_data_img as a join web_sms_data_mobile as q<br />   on a.col_mobile_type=q.col_mobile_type<br />    join @indextable  as p<br />    on a.col_id=p.nid<br />  where p.id&gt;@PageLowerBound and p.id&lt;</span><a href="mailto:=@PageUpperBound"><span style="color: #008000;">=@PageUpperBound</span></a><span style="color: #008000;"><br />   and </span><a href="mailto:a.col_img_group=@gid"><span style="color: #008000;">a.col_img_group=@gid</span></a><span style="color: #008000;"><br />   and q.col_mobile_comment like @LikeBigType<br /> <br /> order by p.id</span></p>


<p><span style="color: #008000;">set nocount off<br />GO<br /></span></p>


<p></p>
]]></content>
  </entry>
  
</feed>
