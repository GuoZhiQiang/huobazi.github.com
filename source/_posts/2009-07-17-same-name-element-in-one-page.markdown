---
layout: post
title: 知识死角,name相同的html element
comments: true
date: 2009-07-17 19:01
categories:
- ASP.NET
- 前端开发
- Asp.net
- C#
---

<p>今天在帮同事调程序时发现了这个死角<br />现象如下，没有任何输入的textarea提交到服务端后得到的值总是","<br />找了半天发现是因为页面上两个textarea的name相同，以前只知道页面上radio的name相同则是一个组，name相同的<br />的checkbox提交后是以逗号分隔值的，于是做了下面代码的试验，发现任何name相同的element提交到服务端都会得到逗号分隔的值，以前还不知道这个，汗</p>
<p><!--more--></p>
<code><span style="color: #000000">
&lt;%@ Page Language="C#" %&gt;<br /><br />&lt;script runat="server" languag="c#"&gt;<br />    string textboxValue = string.Empty;<br />    string radioValue = string.Empty;<br />    string checkboxValue = string.Empty;<br />    string selectValue = string.Empty;<br />    string textareaValue = string.Empty;<br />    void Page_Load(object obj , EventArgs args)<br />    {<br />        placeHolder.Visible = false;<br />        System.Web.HttpContext ctx = System.Web.HttpContext.Current;<br />        if(ctx.Request.HttpMethod == "POST")<br />        {<br />            placeHolder.Visible = true;<br />            textboxValue = ctx.Request.Form["textbox"];<br />            radioValue = ctx.Request.Form["radio"];<br />            checkboxValue = ctx.Request.Form["checkbox"];<br />            selectValue = ctx.Request.Form["select"];<br />            textareaValue = ctx.Request.Form["textarea"];<br />        }<br />    }<br />&lt;/script&gt;<br /><br />&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;<br />&lt;html xmlns="http://www.w3.org/1999/xhtml" &gt;<br />&lt;head&gt;<br />&lt;style&gt;<br />body, h1, h2, h3, h4, h5, h6, hr, p, ul, ol, li,pre,fieldset, lengend, button, input, textarea,{<br />    margin: 0;<br />    padding: 0;<br />}<br />body,button, input, select, textarea {<br />    font: 13px/1 Tahoma, Helvetica, Arial, "\5b8b\4f53", sans-serif;<br />}<br /><br />#page{<br />    padding:10px 30px 10px 30px;<br />}<br />#s{<br />color:red;<br />}<br />input,select,textarea{<br />    clear:both;<br />    float:left;<br />    margin:5px;<br />}<br /><br />pre {<br />    overflow: auto;<br />    border: 1px dotted #281;<br />    background-color: #eee;<br />    padding: 2px 20px 20px 10px;<br />}<br />fieldset{<br />    line-height:200%;<br />}<br /><br />&lt;/style&gt;<br />&lt;/head&gt;<br />&lt;body&gt;<br /><br />&lt;div id="page"&gt;<br /><br />&lt;div id="placeHolder" runat="server"&gt;    <br />            &lt;string id="s"&gt;Post Data:&lt;/string&gt;<br /><br />&lt;pre style="max-height:30px;"&gt;<br />textboxvalue:&lt;%= textboxValue%&gt;<br />radioValue:&lt;%= radioValue%&gt;<br />checkboxValue:&lt;%= checkboxValue%&gt;<br />selectValue:&lt;%=selectValue%&gt;<br />textareaValue:&lt;%= textareaValue%&gt;&lt;/pre&gt;<br /><br />&lt;/div&gt;<br /><br />&lt;form id="aspnetForm" method="post"&gt;<br />                &lt;fieldset&gt;       <br />                  &lt;legend&gt;Test&lt;/legend&gt;              <br />                &lt;input type="text" name="textbox" value="a"/&gt; <br />                &lt;input type="text" name="textbox" value="a"/&gt;<br />                &lt;input type="text" name="textbox" value="a"/&gt;<br />                &lt;input type="radio" name="radio" value="a" /&gt;<br />                &lt;input type="radio" name="radio" value="a" /&gt;<br />                &lt;input type="radio" name="radio" value="a" checked="checked" /&gt;<br />                &lt;input type="checkbox" name="checkbox" value="a" checked="checked" /&gt;<br />                &lt;input type="checkbox" name="checkbox" value="a" checked="checked" /&gt;<br />                &lt;input type="checkbox" name="checkbox" value="a" checked="checked" /&gt;<br />                &lt;select name="select"&gt;<br />                                   &lt;option value="a"&gt;a&lt;/option&gt;<br />                &lt;/select&gt;<br />                &lt;select name="select"&gt;<br />                                   &lt;option value="a"&gt;a&lt;/option&gt;<br />                &lt;/select&gt;<br />                &lt;select name="select"&gt;<br />                                   &lt;option value="a"&gt;a&lt;/option&gt;<br />                &lt;/select&gt;<br />                &lt;textarea name="textarea"&gt;a&lt;/textarea&gt;<br />                &lt;textarea name="textarea"&gt;a&lt;/textarea&gt;<br />                &lt;textarea name="textarea"&gt;a&lt;/textarea&gt;<br />                &lt;input type="submit" value="Do PostBack" /&gt;<br />            &lt;/fieldset&gt;<br />            &lt;/form&gt;<br />    &lt;/div&gt;<br /><br />&lt;/body&gt;<br />&lt;/html&gt;</span>
</code>				
