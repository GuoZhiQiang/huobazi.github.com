---layout: posttitle: 如何在ItemDataBound内获得DataGrid的列名称HeaderTextcomments: truedate: 2004-11-03 19:30categories:- ASP.NET- Asp.net- DataGrid- GridView- Grid---<p> </p><p>如果 AutoGenerateColumns="false" 使用绑定列，模板列<br />则比较好办，直接使用 YourDataGrid.Columns[编号].HeaderText 获得<br />可是,如果 AutoGenerateColumns="true" ,就比较麻烦了,因为这时YourDataGrid.Columns.Count是0<br />但是可以变通做到。</p><p>示例：</p><p><!--more--></p><code><span style="color: #000000">&lt;%@ Page Language="C#" Debug="true" %&gt;<br />&lt;%@ Import Namespace="System.Data" %&gt;<br />&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;<br />&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="gb2312" lang="gb2312"&gt;<br />&lt;head&gt;<br />&lt;title&gt; ItemDataBoundGetColumnName &lt;/title&gt;<br />&lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312" /&gt;<br />&lt;meta name="title" content="" /&gt;<br />&lt;meta name="author" content="活靶子,Huobazi,www.AspxBoy.com" /&gt;<br />&lt;meta name="subject" content="" /&gt;<br />&lt;meta name="language" content="gb2312" /&gt;<br />&lt;meta name="keywords" content="" /&gt;<br />&lt;meta name="Copyright" content="www.AspxBoy.com" /&gt;<br />&lt;meta name="robots" content="all" /&gt;<br /><br />&lt;script language="c#" runat="server"&gt;<br />void BindGrid()<br />{<br />DataTable dt = new DataTable();<br />        DataRow dr;<br />        dt.Columns.Add(new DataColumn("IntegerValue", typeof(Int32)));<br />        dt.Columns.Add(new DataColumn("StringValue", typeof(string)));<br />        dt.Columns.Add(new DataColumn("DateTimeValue", typeof(DateTime)));<br />        dt.Columns.Add(new DataColumn("BoolValue", typeof(bool)));<br />        dt.Columns.Add(new DataColumn("CurrencyValue", typeof(double)));<br />        for (int i = 0; i &lt; 36; i++) {<br />            dr = dt.NewRow();<br />            dr[0] = i;<br />            dr[1] =&amp; amp;nbsp;"项 " + i.ToString();<br />            dr[2] = DateTime.Now;<br />            dr[3] = (i % 2 != 0) ? true : false;<br />            dr[4] = 1.23 * (i+1);<br />            dt.Rows.Add(dr);<br />        }<br />  dg.DataSource= dt;<br />  dg.DataBind();<br />}<br />void Page_Load(object o, EventArgs e)<br />{<br /> dg.PagerStyle.Mode = PagerMode.NumericPages;<br /> if(!IsPostBack)<br /> {<br />BindGrid();<br /> }<br />}<br /> <br />void btnClick(object o , EventArgs e)<br />{<br /> Response.Write("页面回发,但是不执行ItemDataBound");<br />}<br /> <br />void PageChange(object o , DataGridPageChangedEventArgs e)<br />{<br /> dg.CurrentPageIndex = e.NewPageIndex;<br /> BindGrid();<br />}<br />void ItemDataBound(object o , DataGridItemEventArgs e)<br />{<br /> if(e.Item.ItemIndex &gt; -1 )//必须<br /> {<br />  DataRowView drv = (DataRowView)e.Item.DataItem;<br />  for (int i=0; i&lt;drv.Row.Table.Columns.Count ; i++)<br />  {  <br />Response.Write(drv.Row.Table.Columns[i].ColumnName + "  ");<br />  }<br /> }<br />}<br />&lt;/script&gt;<br /><br />&lt;/head&gt;<br />&lt;body&gt;<br />&lt;form runat="server"&gt;<br />  &lt;ASP:DataGrid id="dg" runat="server"       <br />   HeaderStyle-BackColor="#aaaadd"<br />   AutoGenerateColumns="true"<br />   AllowPaging="true"<br />   PageSize="6"<br />    OnItemDataBound="ItemDataBound"<br />    OnPageIndexChanged="PageChange"<br />  &gt;<br />  &lt;/asp:DataGrid&gt;<br />  &lt;/br&gt;<br />   &lt;asp:button id="btn"&amp; amp;nbsp;runat="server" onclick="btnClick" Text="我是按钮, 按我一下"&gt;&lt;/asp:button&gt;<br />在AutoGenerateColumns="false"使用绑定列或者模板列的时候只需要使用 <br /><br />&lt;font color="blut"&amp; amp;gt;YourDataGrid.Columns[编号].HeaderText&lt;/font&gt; 去获取<br />  <br />&lt;/form&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</span></code><p> <br /><a href="http://www.aspxboy.com/Files/71/66/284.Aspx" target="_blank">http://www.aspxboy.com/Files/71/66/284.Aspx</a></p><p> </p>				