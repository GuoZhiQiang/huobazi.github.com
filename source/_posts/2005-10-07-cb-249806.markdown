---
layout: post
title: Communtiy Server论坛的帖子显示页面分页部分的Url Rewrite的构造方法
comments: true
date: 2005-10-07 17:24
categories:
- ASP.NET
- Asp.net
- .Net其他
- Communtiy Server
---

<p>你可能会发现在Communtiy Server的论坛帖子列表页面</p>
<p>比如<a href="http://communityserver.org/forums/129/ShowForum.aspx">http://communityserver.org/forums/129/ShowForum.aspx</a></p>
<p>看下面分页处的连接使用的地址是类似ShowForum.aspx?PageIndex=2这样的地址<br />没有做到SearchFriendly,我们稍微改造一下代码就可以实现类似帖子显示页面内那样的地址<br />先在siteUrl.config内增加</p>
<p> </p>
<div style="padding-right: 5px; padding-left: 4px; font-size: 13px; padding-bottom: 4px; width: 98%; word-break: break-all; padding-top: 4px; background-color: #eeeeee; border: #cccccc 1px solid;">
<span style="COLOR: #0000ff">&lt;</span><span style="COLOR: #800000">url </span><span style="COLOR: #ff0000">name</span><span style="COLOR: #0000ff">="forum_Paged"</span><span style="COLOR: #ff0000"> location </span><span style="COLOR: #0000ff">= "forums"</span><span style="COLOR: #ff0000"> path </span><span style="COLOR: #0000ff">= "{0}/{1}/ShowForum.aspx"</span><span style="COLOR: #ff0000"> pattern </span><span style="COLOR: #0000ff">= "(\d+)/(\d+)/ShowForum.aspx"</span><span style="COLOR: #ff0000"> vanity</span><span style="COLOR: #0000ff">="ShowForum.aspx?PageIndex=$1^ForumID=$2"</span><span style="COLOR: #ff0000"> </span><span style="COLOR: #0000ff">/&gt;</span><span style="COLOR: #000000"><br /></span>
</div>
<p>然后siteUrl.cs内增加<br /> </p>
<div class="codeDiv">public virtual string FormPagedFormat (int forumID)<br />{<br /> return urlData.FormatUrl("forum_Paged", "{0}", forumID.ToString(), forumID.ToString());<br />}</div>
<p>接着ThreadView.cs内paer数据绑定处增加</p>
<div class="codeDiv">pager.UrlPattern = SiteUrls.Instance().FormPagedFormat(csContext.ForumID);<br /> </div>
<p>重新编译，OK，看看效果吧～～</p>
<p><a href="http://www.3pub.com/bbs/3/default.aspx">http://www.3pub.com/bbs/3/default.aspx</a></p>				
